<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>确定订单</title>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <link rel="stylesheet" href="../style/base.css">
    <link rel="stylesheet" href="../style/shared.css">
    <style>
        #box {
            background-color: #F8F8F8;
        }

        .header {
            background-color: #fff;
        }

        .ConfirmOrder_address {
            width: 100%;
            height: auto;
            overflow: hidden;
            border-bottom: 1px solid #e5e5e5;
            margin-bottom: 10px;
            background-color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ConfirmOrder_left {
            width: 10%;
            height: 60px;
            display: inline-block;
            float: left;
            background: url("image/xingquban.png") no-repeat;
            background-size: 15px 20px;
            background-position: 50% 50%;
        }

        .ConfirmOrder_center {
            width: 80%;
            height: 60px;
            text-align: left;
            font-size: 16px;
            color: #333333;
            display: flex;
            align-items: center;
            justify-content: flex-start;
        }

        .ConfirmOrder_right {
            width: 10%;
            height: 60px;
            display: inline-block;
            float: right;
            background: url("image/minepage_go_gray.png") no-repeat;
            background-size: 23px 23px;
            background-position: 50% 50%;
        }

        .ConfirmOrder_center_title {
            flex: 1;
            height: 60px;
            font-size: 14px;
            color: #333333;
            display: flex;
            align-items: center;
            justify-content: flex-start;
        }

        .ReceiptSetItemData {
            width: 100%;
            height: 60px;
        }

        .ReceiptSetItemName {
            flex: 1;
            height: 33px;
            font-size: 15px;
            color: #333333;
            font-weight: bold;
            display: flex;
            align-items: flex-end;
            justify-items: flex-start;
        }

        .ReceiptSetItemPhone {
            margin-left: 5px;
            font-weight: normal;
            font-size: 14px;
        }

        .ReceiptSetItemAddress {
            width: 100%;
            height: 27px;
            font-size: 12px;
            align-items: flex-start;
            justify-content: flex-start;
            color: #6B6B6B;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap
        }

        .ConfirmOrder_image {
            width: 100%;
            height: auto;
            overflow: hidden;
            position: relative;
            background-color: #fff;
        }

        .ConfirmOrderShow {
            width: 100%;
            height: auto;
            overflow: hidden;
            position: relative;
        }

        .ConfirmOrder_image_img {
            width: 25%;
            height: 80px;
            display: inline-block;
            margin: 10px 4% 10px 4%;
            background: url("image/001.jpg") no-repeat;
            background-size: 100% 100%;
            float: left;
        }

        .ConfirmOrder_image_text {
            width: 67%;
            height: 60px;
            padding-right: 15px;
            justify-content: center;
            margin-top: 10px;
            font-size: 15px;
            color: #333333;
            float: left;
        }

        .ConfirmOrder_image_nan {
            width: 67%;
            height: 20px;
            display: inline-block;
            text-align: left;
            font-size: 16px;
            color: #FF4E56;
            float: left;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .ConfirmOrder_text {
            width: 100%;
            height: 39px;
            padding-left: 15px;
            line-height: 39px;
            color: #333333;
            font-size: 14px;
            border-top: 1px solid #e5e5e5;
            background-color: #fff;
        }

        .ConfirmOrder_nan, .ConfirmOrder_nan0 {
            width: auto;
            height: 39px;
            display: inline-block;
            line-height: 39px;
            font-size: 14px;
            color: #FF4E56;
            float: right;
            margin-right: 15px;
        }

        .ConfirmOrder_nan0 {
            padding-top: 7px;
        }

        .ConfirmOrder_Less {
            width: 25px;
            height: 25px;
            display: inline-block;
            background: url("image/jifenduihuan_icon_jianshao.png") no-repeat;
            background-size: 25px 25px;
            float: right;
            border-radius: 50%;
        }

        .ConfirmOrder_Quantity {
            width: 45px;
            height: 25px;
            background-color: #f8f8f8;
            line-height: 25px;
            text-align: center;
            float: right;
            font-size: 14px;
            color: #333333;
            margin: 0 5px;
            border-radius: 5px;
        }

        .ConfirmOrder_add {
            width: 25px;
            height: 25px;
            display: inline-block;
            background: url("image/jifenduihuan_icon_zengjia .png") no-repeat;
            background-size: 25px 25px;
            float: right;
            border-radius: 50%;
        }

        .ConfirmOrder_btn {
            width: 100%;
            height: 45px;
            background-color: #fff;
            position: fixed;
            bottom: 0;
            left: 0;
            border-top: 1px solid #e5e5e5;
            display: flex;
        }

        .ConfirmOrder_btn_left {
            width: 60%;
            height: 45px;
            font-size: 16px;
            color: #FF4E56;
            display: flex;
            align-items: center;
            justify-items: center;
        }

        .allNum {
            width: 25%;
            height: 45px;
            text-align: center;
            line-height: 45px;
            font-size: 14px;
            color: #333333;
            margin-left: 5px;
        }

        .ConfirmOrder_btn_btn {
            width: 75%;
            height: 45px;
            display: inline-block;
            line-height: 45px;
            font-size: 16px;
            color: #FF4E56;
            background-color: #ffffff;
        }

        .ConfirmOrder_btn_right {
            width: 40%;
            height: 45px;
            display: inline-block;
            line-height: 45px;
            text-align: center;
            font-size: 15px;
            color: #fff;
            float: right;
            background-color: #ff3e3e;
        }
    </style>
</head>
<body>
<div id="box">
    <div class="header">
        <span class="left" onclick="Back()"></span>
        <p class="center">确定订单</p>
        <span class="right"></span>
    </div>

    <div class="ConfirmOrder_address">
        <span class="ConfirmOrder_left"></span>
        <div class="ConfirmOrder_center">


        </div>
        <span class="ConfirmOrder_right"></span>
    </div>

    <div class="ConfirmOrder_image">
        <div class="ConfirmOrderShow">
            <span class="ConfirmOrder_image_img"></span>
            <p class="ConfirmOrder_image_text">蜂蜜系列护肤秋冬不脱皮不敏感,超级补水用过的发射点…</p>
            <span class="ConfirmOrder_image_nan">￥300</span>
        </div>
    </div>

    <div class="ConfirmOrder_text">商品数量
        <span class="ConfirmOrder_nan0">
            <span class="ConfirmOrder_add up"></span>
            <input type="text" class="ConfirmOrder_Quantity" value="1">
            <span class="ConfirmOrder_Less down"></span>
        </span>
    </div>
    <!--<p class="ConfirmOrder_text">商品合计 <span class="ConfirmOrder_nan">￥310</span></p>-->
    <p class="ConfirmOrder_text">运费合计 <span class="ConfirmOrder_nan">￥10</span></p>
    <!--<p class="ConfirmOrder_text">优惠活动 <span class="ConfirmOrder_nan">￥0.00</span></p>-->
    <!--<p class="ConfirmOrder_text">实际合计 <span class="ConfirmOrder_nan">￥5588</span></p>-->


    <div class="ConfirmOrder_btn">
        <div class="ConfirmOrder_btn_left">
            <p class="allNum">总价：</p>
            <!--<input type="text" class="ConfirmOrder_btn_btn" disabled="disabled" value="310.00">-->
            <p class="ConfirmOrder_btn_btn">￥00.00</p>
        </div>
        <span class="ConfirmOrder_btn_right" onclick="goShopping()">立即购买</span>
    </div>
</div>

<p class="warn"></p>
<div class="loading">
    <div class="loadingItem">
        <p class="loadingImg"></p>
    </div>
</div>
</body>
<script src="../script/jquery-3.2.1.js"></script>
<script src="../script/shared.js"></script>
<script>

    $(function () {
        const arr = sessionStorage.getItem("arr"), list = JSON.parse(arr);
        if(arr !== null){
            $('.ConfirmOrder_image_img').css({'backgroundImage': 'url("' + list.image + '")'});
            $('.ConfirmOrder_image_text').text(list.title);
            $('.ConfirmOrder_image_nan').text(list.price);
        }else {

        }

        var order = $('.ConfirmOrder_nan').text();
        var price = Number(list.price);//价格
        var addOrder = Number(order);//运费
        console.log(typeof addOrder);
        $('.ConfirmOrder_btn_btn').text('￥'+((price*1)+10));


        var address = sessionStorage.getItem("address");
        var index = JSON.parse(address);
        if (index !== null) {
            var html = '<div class="ReceiptSetItemData" onclick="back()">\n' +
                '           <p class="ReceiptSetItemName">' + index.name + '<span class="ReceiptSetItemPhone">' + index.phone + '</span></p>\n' +
                '           <p class="ReceiptSetItemAddress">' + index.elt + index.receipt + '</p>\n' +
                '       </div>';
            $('.ConfirmOrder_center').html(html);
        } else {
            $('.ConfirmOrder_center').append('<p class="ConfirmOrder_center_title">添加收货地址</p>')
        }

        $('.ConfirmOrder_address')[0].addEventListener('click', function () {
            window.location.href = 'Receipt.html';
        });


        $('.up')[0].addEventListener('click', function () {
            var nowNum = $('.ConfirmOrder_Quantity').val();
            var num = parseInt(nowNum) + 1;
            $('.ConfirmOrder_Quantity').val(num);
            var price = Number(list.price);//价格
            var order = $('.ConfirmOrder_nan').text();
            var addOrder = Number(order);//运费
            $('.ConfirmOrder_btn_btn').text('￥'+((price*num)+10));
        });

        $('.down')[0].addEventListener('click', function () {
            var nowNum = $('.ConfirmOrder_Quantity').val();
            var num = parseInt(nowNum) - 1;
            $('.ConfirmOrder_Quantity').val(num);
            if (num <= 1) {
                $('.ConfirmOrder_Quantity').val(1);
            } else {
                $('.ConfirmOrder_Quantity').val(num);
            }
            var order = $('.ConfirmOrder_nan').text();
            var price = Number(list.price);//价格
            var addOrder = Number(order);//运费
            console.log(typeof addOrder);
            $('.ConfirmOrder_btn_btn').text('￥'+((price*num)+10));
        });
    });

    function Back() {
        sessionStorage.setItem("arr", JSON.stringify(window.ken));
        window.history.back()
    }

    function goShopping() {
        $('.warn').show();
        $('.loading').show();
        $('.warn').text('下单成功');
        setTimeout(function () {
            $('.warn').hide();
            $('.loading').hide();
        },1000);
    }
</script>
</html>
